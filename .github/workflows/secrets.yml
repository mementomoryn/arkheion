name: "[CHORE] Secrets"
on:
  workflow_dispatch:
    inputs:
      repo_access_token:
        description: Set REPO_ACCESS_TOKEN value
        required: false
        type: string
      deezer_arl:
        description: Set DEEZER_ARL value
        required: false
        type: string
      qobuz_user_id:
        description: Set QOBUZ_USER_ID value
        required: false
        type: string
      qobuz_token:
        description: Set QOBUZ_TOKEN value
        required: false
        type: string
      spotify_client_id:
        description: Set SPOTIFY_CLIENT_ID value
        required: false
        type: string
      spotify_client_secret:
        description: Set SPOTIFY_CLIENT_SECRET value
        required: false
        type: string
      tidal_user_id:
        description: Set TIDAL_USER_ID value
        required: false
        type: string
      tidal_country_code:
        description: Set TIDAL_COUNTRY_CODE value
        required: false
        type: string
      tidal_access_token:
        description: Set TIDAL_ACCESS_TOKEN value
        required: false
        type: string
      tidal_refresh_token:
        description: Set TIDAL_REFRESH_TOKEN value
        required: false
        type: string
      tidal_token_expiry:
        description: Set TIDAL_TOKEN_EXPIRY value
        required: false
        type: string
      ytmusic_cookie_base64:
        description: Set YTMUSIC_COOKIE_BASE64 value
        required: false
        type: string
jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - name: Verify user
        id: user_id
        run: |
          if [[ ${{ github.actor_id }} == '132916305' || ${{ github.actor_id }} == '112367223' ]]; then
            echo "verified=true" >> $GITHUB_OUTPUT
          else
            echo "verified=false" >> $GITHUB_OUTPUT
          fi
    outputs:
      user-verified: ${{ steps.user_id.outputs.verified }}
  secrets:
    needs: verify
    if: ${{ needs.verify.outputs.user-verified == 'true' }}
    runs-on: ubuntu-latest
    permissions:
      actions: write
      contents: read
    env:
      GH_TOKEN: ${{ secrets.REPO_ACCESS_TOKEN }}
    steps:
      - name: Set REPO_ACCESS_TOKEN values
        if: ${{ inputs.repo_access_token != "" }}
        run: |
          gh secret set REPO_ACCESS_TOKEN -a actions -b ${{ inputs.repo_access_token }}
      - name: Set DEEZER_ARL values
        if: ${{ inputs.deezer_arl != "" }}
        run: |
          gh secret set DEEZER_ARL -a actions -b ${{ inputs.deezer_arl }}
      - name: Set QOBUZ_USER_ID values
        if: ${{ inputs.qobuz_user_id != "" }}
        run: |
          gh secret set QOBUZ_USER_ID -a actions -b ${{ inputs.qobuz_user_id }}
      - name: Set QOBUZ_TOKEN values
        if: ${{ inputs.qobuz_token != "" }}
        run: |
          gh secret set QOBUZ_TOKEN -a actions -b ${{ inputs.qobuz_token }}
      - name: Set SPOTIFY_CLIENT_ID values
        if: ${{ inputs.spotify_client_id != "" }}
        run: |
          gh secret set SPOTIFY_CLIENT_ID -a actions -b ${{ inputs.spotify_client_id }}
      - name: Set SPOTIFY_CLIENT_SECRET values
        if: ${{ inputs.spotify_client_secret != "" }}
        run: |
          gh secret set SPOTIFY_CLIENT_SECRET -a actions -b ${{ inputs.spotify_client_secret }}
      - name: Set TIDAL_USER_ID values
        if: ${{ inputs.tidal_user_id != "" }}
        run: |
          gh secret set TIDAL_USER_ID -a actions -b ${{ inputs.tidal_user_id }}
      - name: Set TIDAL_ACCOUNT_CODE values
        if: ${{ inputs.tidal_account_code != "" }}
        run: |
          gh secret set TIDAL_ACCOUNT_CODE -a actions -b ${{ inputs.tidal_account_code }}
      - name: Set TIDAL_ACCESS_TOKEN values
        if: ${{ inputs.tidal_access_token != "" }}
        run: |
          gh secret set TIDAL_ACCESS_TOKEN -a actions -b ${{ inputs.tidal_access_token }}
      - name: Set TIDAL_REFRESH_TOKEN values
        if: ${{ inputs.tidal_refresh_token != "" }}
        run: |
          gh secret set TIDAL_REFRESH_TOKEN -a actions -b ${{ inputs.tidal_refresh_token }}
      - name: Set TIDAL_TOKEN_EXPIRY values
        if: ${{ inputs.tidal_token_expiry != "" }}
        run: |
          gh secret set TIDAL_TOKEN_EXPIRY -a actions -b ${{ inputs.tidal_token_expiry }}
      - name: Set YTMUSIC_COOKIE_BASE64 values
        if: ${{ inputs.ytmusic_cookie_base64 != "" }}
        run: |
          gh secret set YTMUSIC_COOKIE_BASE64 -a actions -b ${{ inputs.ytmusic_cookie_base64 }}